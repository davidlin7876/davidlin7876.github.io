<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Mac配置Docker+NodeJS服务 | 林峰的小宇宙</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="服务器端环境配置请点击：CentOS配置Docker+NodeJS服务 Mac的一些安装安装 NodeJShttps://nodejs.org/en/download/ 安装loopback-clihttp://loopback.io1npm install -g loopback-cli 安装zsh作为默认SHELLhttp://blog.csdn.net/w670328683/article/">
<meta name="keywords" content="NodeJS">
<meta property="og:type" content="article">
<meta property="og:title" content="Mac配置Docker+NodeJS服务">
<meta property="og:url" content="https://linfeng.xyz/2017/9/20/cj9k1w763000gesrrsu0v26bo/index.html">
<meta property="og:site_name" content="林峰的小宇宙">
<meta property="og:description" content="服务器端环境配置请点击：CentOS配置Docker+NodeJS服务 Mac的一些安装安装 NodeJShttps://nodejs.org/en/download/ 安装loopback-clihttp://loopback.io1npm install -g loopback-cli 安装zsh作为默认SHELLhttp://blog.csdn.net/w670328683/article/">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2017-11-03T15:15:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mac配置Docker+NodeJS服务">
<meta name="twitter:description" content="服务器端环境配置请点击：CentOS配置Docker+NodeJS服务 Mac的一些安装安装 NodeJShttps://nodejs.org/en/download/ 安装loopback-clihttp://loopback.io1npm install -g loopback-cli 安装zsh作为默认SHELLhttp://blog.csdn.net/w670328683/article/">
  
    <link rel="alternate" href="/atom.xml" title="林峰的小宇宙" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">林峰的小宇宙</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">爆发了～～～</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://linfeng.xyz"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Mac配置Docker+NodeJS服务" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/9/20/cj9k1w763000gesrrsu0v26bo/" class="article-date">
  <time datetime="2017-09-19T16:00:00.000Z" itemprop="datePublished">2017-09-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Mac配置Docker+NodeJS服务
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>服务器端环境配置请点击：<a href="http://www.jianshu.com/p/12cee6725b58" target="_blank" rel="external">CentOS配置Docker+NodeJS服务</a></p>
<h1 id="Mac的一些安装"><a href="#Mac的一些安装" class="headerlink" title="Mac的一些安装"></a>Mac的一些安装</h1><h3 id="安装-NodeJS"><a href="#安装-NodeJS" class="headerlink" title="安装 NodeJS"></a>安装 NodeJS</h3><p><a href="https://nodejs.org/en/download/" target="_blank" rel="external">https://nodejs.org/en/download/</a></p>
<h3 id="安装loopback-cli"><a href="#安装loopback-cli" class="headerlink" title="安装loopback-cli"></a>安装loopback-cli</h3><p><a href="http://loopback.io" title="http://loopback.io" target="_blank" rel="external">http://loopback.io</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g loopback-cli</div></pre></td></tr></table></figure></p>
<p>安装zsh作为默认SHELL<br><a href="http://blog.csdn.net/w670328683/article/details/49782601" title="http://blog.csdn.net/w670328683/article/details/49782601" target="_blank" rel="external">http://blog.csdn.net/w670328683/article/details/49782601</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">brew install zsh</div><div class="line">zsh --version</div><div class="line">chsh -s /bin/zsh</div><div class="line">echo $SHELL</div></pre></td></tr></table></figure></p>
<p>安装oh-my-zsh美化zsh<br><a href="https://github.com/robbyrussell/oh-my-zsh" title="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="external">https://github.com/robbyrussell/oh-my-zsh</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sh -c &quot;$(wget https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</div></pre></td></tr></table></figure></p>
<h3 id="安装tmux分屏幕"><a href="#安装tmux分屏幕" class="headerlink" title="安装tmux分屏幕"></a>安装tmux分屏幕</h3><p><a href="https://github.com/gpakosz/.tmux" title="https://github.com/gpakosz/.tmux" target="_blank" rel="external">https://github.com/gpakosz/.tmux</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install tmux</div></pre></td></tr></table></figure></p>
<h3 id="安装mosh"><a href="#安装mosh" class="headerlink" title="安装mosh"></a>安装mosh</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install mosh</div></pre></td></tr></table></figure>
<h3 id="安装mongodb数据库-只在docker使用的话不用装"><a href="#安装mongodb数据库-只在docker使用的话不用装" class="headerlink" title="安装mongodb数据库(只在docker使用的话不用装)"></a>安装mongodb数据库(只在docker使用的话不用装)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">brew update</div><div class="line">brew install mongodb</div></pre></td></tr></table></figure>
<h5 id="遇到一个问题"><a href="#遇到一个问题" class="headerlink" title="遇到一个问题"></a>遇到一个问题</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Error: Running Homebrew as root is extremely dangerous and no longer supported.</div><div class="line">As Homebrew does not drop privileges on installation you would be giving all</div><div class="line">build scripts full access to your system.</div></pre></td></tr></table></figure>
<h5 id="这样解决"><a href="#这样解决" class="headerlink" title="这样解决"></a>这样解决</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo chown -R $(whoami) /usr/local</div><div class="line">brew install mongodb</div></pre></td></tr></table></figure>
<h3 id="安装redis数据-只在docker使用的话不用装"><a href="#安装redis数据-只在docker使用的话不用装" class="headerlink" title="安装redis数据(只在docker使用的话不用装)"></a>安装redis数据(只在docker使用的话不用装)</h3><p><a href="https://redis.io" target="_blank" rel="external">https://redis.io</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar xzf redis-4.0.1.tar</div><div class="line">cd redis-4.0.1</div><div class="line">make</div><div class="line">make install</div></pre></td></tr></table></figure>
<h3 id="安装mongo-express-只在docker使用的话不用装"><a href="#安装mongo-express-只在docker使用的话不用装" class="headerlink" title="安装mongo-express(只在docker使用的话不用装)"></a>安装mongo-express(只在docker使用的话不用装)</h3><p><a href="https://github.com/mongo-express/mongo-express" target="_blank" rel="external">https://github.com/mongo-express/mongo-express</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">npm install -g mongo-express</div></pre></td></tr></table></figure>
<h3 id="安装Vim的插件janus"><a href="#安装Vim的插件janus" class="headerlink" title="安装Vim的插件janus"></a>安装Vim的插件janus</h3><p>The distribution also requires ack, ctags, git, ruby and rake.<br><a href="https://github.com/carlhuda/janus" title="https://github.com/carlhuda/janus" target="_blank" rel="external">https://github.com/carlhuda/janus</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -L https://bit.ly/janus-bootstrap | bash</div></pre></td></tr></table></figure></p>
<h3 id="安装pm2"><a href="#安装pm2" class="headerlink" title="安装pm2"></a>安装pm2</h3><p><a href="http://pm2.keymetrics.io" target="_blank" rel="external">http://pm2.keymetrics.io</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install pm2 -g</div><div class="line">npm install pm2@latest -g</div></pre></td></tr></table></figure></p>
<h3 id="安装docker，docker-compose"><a href="#安装docker，docker-compose" class="headerlink" title="安装docker，docker-compose"></a>安装docker，docker-compose</h3><p><a href="https://www.docker.com/" target="_blank" rel="external">https://www.docker.com/</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">brew search docker</div><div class="line">brew update</div><div class="line">brew install docker</div><div class="line">brew install docker-compose</div></pre></td></tr></table></figure></p>
<h3 id="安装httpie"><a href="#安装httpie" class="headerlink" title="安装httpie"></a>安装httpie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install httpie</div></pre></td></tr></table></figure>
<h1 id="Mac的代码管理："><a href="#Mac的代码管理：" class="headerlink" title="Mac的代码管理："></a>Mac的代码管理：</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">git clone https://git.coding.net/zbsas/webstore-backend.git</div><div class="line">git checkout next</div><div class="line">git submodule init</div><div class="line">git submodule update</div><div class="line">npm install</div></pre></td></tr></table></figure>
<p>发现子模块代码下不来，这样解决：<br>查看公钥私钥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cd ~/.ssh</div></pre></td></tr></table></figure></p>
<p>.pub 文件是你的公钥，另一个则是私钥。如果找不到这样的文件，你可以通过运行 程序来创建它们：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh-keygen</div></pre></td></tr></table></figure>
<p>然后在coding上设上公钥，子目录代码可以下来了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git submodule update</div></pre></td></tr></table></figure>
<h3 id="上传服务器代码"><a href="#上传服务器代码" class="headerlink" title="上传服务器代码"></a>上传服务器代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rsync -avuzb xiaoyx root@dlin.top:~/</div></pre></td></tr></table></figure>
<h5 id="过滤没有必要的文件和目录"><a href="#过滤没有必要的文件和目录" class="headerlink" title="过滤没有必要的文件和目录"></a>过滤没有必要的文件和目录</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rsync -avuzb --exclude=.git --exclude=node_modules webstore-backend/* root@dlin.top:~/</div></pre></td></tr></table></figure>
<h3 id="下载服务器代码"><a href="#下载服务器代码" class="headerlink" title="下载服务器代码"></a>下载服务器代码</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rsync -avuzb root@dlin.top:/root/xiaoyx/ .</div><div class="line">scp root@dlin.top:/root/xiaoyx/docker-compose.yml .</div></pre></td></tr></table></figure>
<h1 id="代码调试："><a href="#代码调试：" class="headerlink" title="代码调试："></a>代码调试：</h1><h3 id="开启redis"><a href="#开启redis" class="headerlink" title="开启redis"></a>开启redis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">src/redis-server</div></pre></td></tr></table></figure>
<p>也可以用pm2开启redis<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pm2 start src/redis-server</div></pre></td></tr></table></figure></p>
<h3 id="开启mongodb"><a href="#开启mongodb" class="headerlink" title="开启mongodb"></a>开启mongodb</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /Code-Backend/mongodb</div><div class="line">mkdir data</div><div class="line">mkdir log</div><div class="line">mongod --dbpath data --logpath log/mongod.log --logappend --fork</div></pre></td></tr></table></figure>
<h3 id="关闭mongodb"><a href="#关闭mongodb" class="headerlink" title="关闭mongodb"></a>关闭mongodb</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mongo</div><div class="line">use admin</div><div class="line">db.shutdownServer();</div></pre></td></tr></table></figure>
<h3 id="pm2-看log"><a href="#pm2-看log" class="headerlink" title="pm2 看log"></a>pm2 看log</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /Code-Backend/webstore-backend</div><div class="line">pm2 start development.json</div><div class="line">pm2 logs 1</div><div class="line">pm2 stop all</div></pre></td></tr></table></figure>
<hr>
<h1 id="docker调试"><a href="#docker调试" class="headerlink" title="docker调试"></a>docker调试</h1><p><a href="http://www.cnblogs.com/52fhy/p/5991344.html" target="_blank" rel="external">Docker之Compose服务编排</a></p>
<h5 id="开启和关闭"><a href="#开启和关闭" class="headerlink" title="开启和关闭"></a>开启和关闭</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">docker ps</div><div class="line">docker-compose up -d</div><div class="line">docker-compose stop</div><div class="line">docker-compose restart</div><div class="line">docker-compose down</div></pre></td></tr></table></figure>
<h5 id="重置一个docker"><a href="#重置一个docker" class="headerlink" title="重置一个docker"></a>重置一个docker</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">docker-compose down</div><div class="line">docker ps -a</div><div class="line">docker rm codebackend_ws_1</div><div class="line">docker ps -a</div><div class="line">docker image ls</div><div class="line">docker image rm codebackend_ws</div><div class="line">docker-compose up -d</div></pre></td></tr></table></figure>
<h5 id="启动并看log"><a href="#启动并看log" class="headerlink" title="启动并看log"></a>启动并看log</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker-compose up</div></pre></td></tr></table></figure>
<h5 id="看其中某一个log"><a href="#看其中某一个log" class="headerlink" title="看其中某一个log"></a>看其中某一个log</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">docker ps</div><div class="line">docker exec -it codebackend_ws_1 sh</div><div class="line">pm2 list</div><div class="line">pm2 logs 1</div></pre></td></tr></table></figure>
<h5 id="批处理脚本"><a href="#批处理脚本" class="headerlink" title="批处理脚本"></a>批处理脚本</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 关闭所有正在运行容器</div><div class="line">docker ps | awk  &apos;&#123;print $1&#125;&apos; | xargs docker stop</div><div class="line"># 删除所有容器应用</div><div class="line">docker ps -a | awk  &apos;&#123;print $1&#125;&apos; | xargs docker rm</div><div class="line"># 或者</div><div class="line">docker rm $(docker ps -a -q)</div></pre></td></tr></table></figure>
<h3 id="mongo-express"><a href="#mongo-express" class="headerlink" title="mongo-express"></a>mongo-express</h3><p><a href="https://github.com/mongo-express/mongo-express" target="_blank" rel="external">https://github.com/mongo-express/mongo-express</a></p>
<h4 id="先建立用户"><a href="#先建立用户" class="headerlink" title="先建立用户"></a>先建立用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">docker exec -it codebackend_mongodb_1 mongo</div><div class="line">show dbs;</div><div class="line">use admin</div></pre></td></tr></table></figure>
<h5 id="管理员用户"><a href="#管理员用户" class="headerlink" title="管理员用户"></a>管理员用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">db.createUser(&#123;</div><div class="line">   user : &quot;用户名&quot;,</div><div class="line">   pwd  : &quot;密码&quot;,</div><div class="line">   roles : [</div><div class="line">       &#123;</div><div class="line">           role : &quot;userAdminAnyDatabase&quot;,</div><div class="line">           db : &quot;admin&quot;</div><div class="line">       &#125;</div><div class="line">   ]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h5 id="特定数据库管理权限的用户"><a href="#特定数据库管理权限的用户" class="headerlink" title="特定数据库管理权限的用户"></a>特定数据库管理权限的用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">use &quot;数据库名&quot;</div><div class="line"> db.createUser(&#123;</div><div class="line">    user : &quot;用户名&quot;,</div><div class="line">    pwd  : &quot;密码&quot;,</div><div class="line">    roles : [</div><div class="line">        &#123;</div><div class="line">            role : &quot;userAdmin&quot;,</div><div class="line">            db : &quot;数据库名&quot;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line"> &#125;)</div></pre></td></tr></table></figure>
<h5 id="一般用户"><a href="#一般用户" class="headerlink" title="一般用户"></a>一般用户</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">db &quot;数据库名&quot;</div><div class="line"> db.createUser(&#123;</div><div class="line">    user : &quot;用户名&quot;,</div><div class="line">    pwd  : &quot;密码&quot;,</div><div class="line">    roles: [</div><div class="line">        &#123;</div><div class="line">            role : &quot;read&quot;,  # or &quot;readWrite&quot;</div><div class="line">            db : &quot;数据库名&quot;,</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line"> &#125;)</div></pre></td></tr></table></figure>
<blockquote>
<p>例：创建一个数据库用户，对该数据具有读写权限</p>
<p>创建一个对数据库具有读写权限的数据库用户<br>use dbname ;<br>db.createUser({user: “dbuser”, pwd: “dbuseradmin”, roles:[{role: “readWrite”, db: “dbname”}] })</p>
<p>数据库用户登录<br>mongo dbname -u dbuser -p dbduseradmin</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd YOUR_PATH/node_modules/mongo-express/ &amp;&amp; node app.js</div><div class="line">mongo-express -u user -p password -d database</div><div class="line">mongo-express -u dlin -p dlin -d webstore-prod</div></pre></td></tr></table></figure>
<h5 id="远程"><a href="#远程" class="headerlink" title="远程"></a>远程</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mongo-express -u user -p password -d database -H mongoDBHost -P mongoDBPort</div></pre></td></tr></table></figure>
<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mongo-express -a -u superuser -p password</div><div class="line">mongo-express -h</div></pre></td></tr></table></figure>
<h5 id="Usage-Docker"><a href="#Usage-Docker" class="headerlink" title="Usage (Docker)"></a>Usage (Docker)</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">docker build -t mongo-express .</div><div class="line">docker run -it --rm -p 8081:8081 --link YOUR_MONGODB_CONTAINER:mongo mongo-express</div></pre></td></tr></table></figure>
<p>例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run -it --rm -p 8081:8081 --link codebackend_mongodb_1:mongo mongo-express</div></pre></td></tr></table></figure></p>
<p>You can use the following environment variables to modify the container’s configuration:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ME_CONFIG_MONGODB_SERVER</code></td>
<td><code>mongo</code> or <code>localhost</code></td>
<td>MongoDB host name or IP address. The default is <code>localhost</code> in the config file and <code>mongo</code> in the docker image. If it is a replica set, use a comma delimited list of the host names.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_PORT</code></td>
<td><code>27017</code></td>
<td>MongoDB port.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_URL</code></td>
<td><code>mongodb://admin:pass@localhost:27017/db?ssl=false</code></td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_ENABLE_ADMIN</code></td>
<td><code>false</code></td>
<td>Enable administrator access. Send strings: <code>&quot;true&quot;</code> or <code>&quot;false&quot;</code>.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_ADMINUSERNAME</code></td>
<td><code> </code></td>
<td>Administrator username.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_ADMINPASSWORD</code></td>
<td><code> </code></td>
<td>Administrator password.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_AUTH_DATABASE</code></td>
<td><code>db</code></td>
<td>Database name (only needed if <code>ENABLE_ADMIN</code> is <code>&quot;false&quot;</code>).</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_AUTH_USERNAME</code></td>
<td><code>admin</code></td>
<td>Database username (only needed if <code>ENABLE_ADMIN</code> is <code>&quot;false&quot;</code>).</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_AUTH_PASSWORD</code></td>
<td><code>pass</code></td>
<td>Database password (only needed if <code>ENABLE_ADMIN</code> is <code>&quot;false&quot;</code>).</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_BASEURL</code></td>
<td><code>/</code></td>
<td>Set the express baseUrl to ease mounting at a subdirectory. Remember to include a leading and trailing slash.</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_COOKIESECRET</code></td>
<td><code>cookiesecret</code></td>
<td>String used by <a href="https://www.npmjs.com/package/cookie-parser" target="_blank" rel="external">cookie-parser middleware</a> to sign cookies.</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_SESSIONSECRET</code></td>
<td><code>sessionsecret</code></td>
<td>String used to sign the session ID cookie by <a href="https://www.npmjs.com/package/express-session" target="_blank" rel="external">express-session middleware</a>.</td>
</tr>
<tr>
<td><code>ME_CONFIG_BASICAUTH_USERNAME</code></td>
<td><code>admin</code></td>
<td>mongo-express web login name. Sending an empty string will disable basic authentication.</td>
</tr>
<tr>
<td><code>ME_CONFIG_BASICAUTH_PASSWORD</code></td>
<td><code>pass</code></td>
<td>mongo-express web login password.</td>
</tr>
<tr>
<td><code>ME_CONFIG_REQUEST_SIZE</code></td>
<td><code>100kb</code></td>
<td>Used to configure maximum mongo update payload size. CRUD operations above this size will fail due to restrictions in <a href="https://www.npmjs.com/package/body-parser" target="_blank" rel="external">body-parser</a>.</td>
</tr>
<tr>
<td><code>ME_CONFIG_OPTIONS_EDITORTHEME</code></td>
<td><code>rubyblue</code></td>
<td>Web editor color theme, <a href="http://codemirror.net/demo/theme.html" target="_blank" rel="external">more here</a>.</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_SSL_ENABLED</code></td>
<td><code>false</code></td>
<td>Enable SSL.</td>
</tr>
<tr>
<td><code>ME_CONFIG_MONGODB_SSLVALIDATE</code></td>
<td><code>true</code></td>
<td>Validate mongod server certificate against CA</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_SSL_CRT_PATH</code></td>
<td><code> </code></td>
<td>SSL certificate file.</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_SSL_KEY_PATH</code></td>
<td><code> </code></td>
<td>SSL key file.</td>
</tr>
<tr>
<td><code>ME_CONFIG_SITE_GRIDFS_ENABLED</code></td>
<td><code>false</code></td>
<td>Enable gridFS to manage uploaded files.</td>
</tr>
</tbody>
</table>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">docker run -it --rm \</div><div class="line">    --name mongo-express \</div><div class="line">    --link web_db_1:mongo \</div><div class="line">    -p 8081:8081 \</div><div class="line">    -e ME_CONFIG_OPTIONS_EDITORTHEME=&quot;ambiance&quot; \</div><div class="line">    -e ME_CONFIG_BASICAUTH_USERNAME=&quot;&quot; \</div><div class="line">    mongo-express</div></pre></td></tr></table></figure>
<h5 id="设置dockor运行的配置文件"><a href="#设置dockor运行的配置文件" class="headerlink" title="设置dockor运行的配置文件"></a>设置dockor运行的配置文件</h5><p><strong>docker-compose.yml</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">mongo-express:</div><div class="line">    image: mongo-express</div><div class="line">    depends_on:</div><div class="line">      - mongodb</div><div class="line">    restart: always</div><div class="line">    links:</div><div class="line">      - mongodb:mongo</div><div class="line">    ports:</div><div class="line">      - &quot;8081:8081&quot;</div><div class="line">    environment:</div><div class="line">      - ME_CONFIG_MONGODB_ADMINUSERNAME = admin</div><div class="line">      - ME_CONFIG_MONGODB_ADMINPASSWORD = pass</div></pre></td></tr></table></figure>
<h5 id="设置登录页账号密码"><a href="#设置登录页账号密码" class="headerlink" title="设置登录页账号密码"></a>设置登录页账号密码</h5><p><a href="https://caddyserver.com/docs/basicauth" target="_blank" rel="external">https://caddyserver.com/docs/basicauth</a></p>
<h5 id="Caddyfile"><a href="#Caddyfile" class="headerlink" title="Caddyfile"></a>Caddyfile</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">http://db.local.dlin.top &#123;</div><div class="line">  basicauth / admin pass</div><div class="line">  proxy / mongo-express:8081 &#123;</div><div class="line">    transparent</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://linfeng.xyz/2017/9/20/cj9k1w763000gesrrsu0v26bo/" data-id="cj9k1w763000gesrrsu0v26bo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NodeJS/">NodeJS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/9/24/cj9k1w765000iesrr3wasnwfx/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          XCode可清理空间的路径
        
      </div>
    </a>
  
  
    <a href="/2017/9/18/cj9k1w75z000cesrrfcur8t2u/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">LoopBack学习 之 创建应用程序</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Tools/">Tools</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XCode/">XCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/NodeJS/" style="font-size: 20px;">NodeJS</a> <a href="/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/tags/XCode/" style="font-size: 10px;">XCode</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">九月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/9/25/cj9k1w768000lesrrgv1dpfag/">Git使用备忘</a>
          </li>
        
          <li>
            <a href="/2017/9/24/cj9k1w765000iesrr3wasnwfx/">XCode可清理空间的路径</a>
          </li>
        
          <li>
            <a href="/2017/9/20/cj9k1w763000gesrrsu0v26bo/">Mac配置Docker+NodeJS服务</a>
          </li>
        
          <li>
            <a href="/2017/9/18/cj9k1w75z000cesrrfcur8t2u/">LoopBack学习 之 创建应用程序</a>
          </li>
        
          <li>
            <a href="/2017/9/17/cj9k1w75o0005esrryd4bjbhh/">CentOS配置Docker+NodeJS服务</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 David Lin<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>